<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/favicon-32x32.png">
    <link rel="stylesheet" href="../styles/top-bar.css">
    <link rel="stylesheet" href="../styles/create account.css">
    <link rel="stylesheet" href="../styles/newsletter.css">
    <link rel="stylesheet" href="../styles/footer.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Sans+Extra+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&display=swap"
        rel="stylesheet">
    <title>Aura Library - Create account</title>
</head>

<body>
    <div id="header"></div>
    <div class="register-container">
        <form id="formular">
            <div class="welcome-container">
                <div class="welcome-message">Hello!</div>
                <div class="guide-to-register">Create account</div>
            </div>
            <div class="registration-container">
                <div class="info-container">
                    <div>
                        <input type="email" id="email" placeholder="Email address">
                        <span id="email-error"></span>
                    </div>
                    <div><input type="text" id="phone-number" placeholder="Phone number"></div>
                    <div><input type="text" id="nickname" placeholder="Nickname"></div>
                    <div>
                        <input type="password" id="password" placeholder="Password">
                        <span id="password-error"></span>
                    </div>
                    <div>
                        <input type="password" id="confirm-password" placeholder="Confirm password">
                        <span id="confirm-password-error"></span>
                    </div>
                </div>
                <div class="button-container">
                    <button type="submit" class="register-btn">Register</button>
                </div>
            </div>
        </form>
    </div>
    <div id="footer"></div>



    <script>
        fetch('header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header').innerHTML = data;
            })
            .catch(error => console.error('Error loading header:', error));

        fetch('footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            })
            .catch(error => console.error('Error loading footer:', error));

        const emailInput = document.getElementById("email");
        const passwordInput = document.getElementById("password");
        const confirmpasswordInput = document.getElementById("confirm-password");
        const form = document.getElementById("formular");
        const email_error = document.getElementById("email-error");
        const password_error = document.getElementById("password-error");
        const confirm_password_error = document.getElementById("confirm-password-error");

        form.addEventListener('submit', function (event) {
            event.preventDefault();

            emailInput.classList.remove('valid', 'invalid');
            passwordInput.classList.remove('valid', 'invalid');
            confirmpasswordInput.classList.remove('valid', 'invalid');
            email_error.innerHTML = "";
            password_error.innerHTML = "";
            confirm_password_error.innerHTML = "";


            // verificare e-mail
            if (emailInput.value === "" || emailInput.value == null) {
                email_error.innerHTML = "Please enter a valid email!";
                emailInput.classList.add('invalid');
            } else {
                const emailRegex = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
                if (!emailInput.value.match(emailRegex)) {
                    email_error.innerHTML = "Please enter a valid email!";
                    emailInput.classList.add('invalid');
                } else {
                    email_error.innerHTML = "Email adreess is correct!"
                    emailInput.classList.add('valid');
                }
            }

            //verificare parola
            const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
            if (!passwordInput.value.match(passwordRegex)) {
                password_error.innerHTML = "Please enter a valid password!";
                passwordInput.classList.add('invalid');
            } else {
                password_error.innerHTML = "Password is correct!"
                passwordInput.classList.add('valid');
            }

            //verificare daca parolele coincid
            if (passwordInput.value !== confirmpasswordInput.value) {
                confirm_password_error.innerHTML = "Passwords don't match!";
                confirmpasswordInput.classList.add('invalid');
            } else if (passwordInput.classList.contains('valid')) {
                confirm_password_error.innerHTML = "Passwords match!";
                confirmpasswordInput.classList.add('valid');
            }
        }
        );
    </script>
</body>

</html>